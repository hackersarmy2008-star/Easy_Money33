<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Money</title>
<link rel="stylesheet" href="style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<script>
  // Protect page: redirect to login if not logged in
  if (!localStorage.getItem('authToken')) {
    window.location.href = 'login.html';
  }
</script>

<header>
  <div class="header-top">
    <div class="logo">Easy Money</div>
    <div class="icons">
      <i class="bi bi-globe"></i>
      <i class="bi bi-bell"></i>
    </div>
  </div>
</header>

<main>
  <section class="banner">
    <img src="images/banner-premium.png" alt="Easy Money Premium Banner">
  </section>

  <section class="quick-actions">
    <div class="action" onclick="checkIn()" style="cursor:pointer">
      <i class="bi bi-calendar-check"></i>
      <span>CheckIn</span>
    </div>
    <div class="action" onclick="window.location.href='products.html'" style="cursor:pointer">
      <i class="bi bi-graph-up-arrow"></i>
      <span>Invest</span>
    </div>
    <div class="action" onclick="recharge()" style="cursor:pointer">
      <i class="bi bi-wallet2"></i>
      <span>Recharge</span>
    </div>
    <div class="action" onclick="withdraw()" style="cursor:pointer">
      <i class="bi bi-cash-stack"></i>
      <span>Withdraw</span>
    </div>
  </section>

  <section class="plans">
    <h2>‚≠ê Special Investment Plans</h2>
    <div id="plansGrid"></div>
  </section>

  <section class="transactions">
    <h2>üí∏ Recent Transactions</h2>
    <div id="transactionList"></div>
  </section>
</main>

<nav class="bottom-nav">
  <a href="index.html" class="nav-item active"><i class="bi bi-house"></i><span>Home</span></a>
  <a href="products.html" class="nav-item"><i class="bi bi-box-seam"></i><span>Products</span></a>
  <a href="promotion.html" class="nav-item"><i class="bi bi-megaphone"></i><span>Promotion</span></a>
  <a href="mine.html" class="nav-item"><i class="bi bi-person"></i><span>Mine</span></a>
</nav>

<script src="main.js"></script>
<script>
const plans = [
  { name: "Special Offer", days: 2, daily: 2640, total: 5280, price: 800, img: "attached_assets/stock_images/modern_electronic_ga_02091fd0.jpg" },
  { name: "Farming 1", days: 45, daily: 990, total: 990, price: 296, img: "attached_assets/stock_images/modern_electronic_ga_473c27f4.jpg" }
];

const transactionPool = [
  { user: 6453, action: "Withdraw", amount: 5275, date:"2025-09-29 22:23" },
  { user: 7677, action: "Withdraw", amount: 3767, date:"2025-09-18 22:23" },
  { user: 5522, action: "Withdraw", amount: 1903, date:"2025-10-01 22:23" },
  { user: 2957, action: "Withdraw", amount: 8658, date:"2025-10-02 22:23" },
  { user: 3456, action: "Withdraw", amount: 4520, date:"2025-10-03 15:45" },
  { user: 8912, action: "Withdraw", amount: 6789, date:"2025-10-04 10:12" },
  { user: 4523, action: "Withdraw", amount: 2345, date:"2025-10-05 18:30" },
  { user: 7234, action: "Withdraw", amount: 9876, date:"2025-10-06 09:22" },
  { user: 5678, action: "Withdraw", amount: 3456, date:"2025-10-07 14:56" },
  { user: 9012, action: "Withdraw", amount: 7654, date:"2025-10-08 11:33" },
  { user: 2345, action: "Withdraw", amount: 5432, date:"2025-10-09 16:45" },
  { user: 6789, action: "Withdraw", amount: 8901, date:"2025-10-10 13:21" }
];

let transactions = [];

function getRandomTransactions() {
  const shuffled = [...transactionPool].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 4);
}

transactions = getRandomTransactions();

setInterval(() => {
  transactions = getRandomTransactions();
  renderTransactions();
}, 60000);

function renderPlans(){
  const grid = document.getElementById("plansGrid");
  grid.innerHTML = "";
  plans.forEach(p => {
    grid.innerHTML += `
      <div class="plan-card">
        <div class="plan-left">
          <img src="${p.img}" alt="${p.name}">
        </div>
        <div class="plan-info">
          <h3>${p.name}</h3>
          <p class="muted">Days: ${p.days}</p>
          <div class="income-row">
            <div>
              <p class="muted">Daily Profit</p>
              <p class="big">‚Çπ${p.daily}</p>
            </div>
            <div>
              <p class="muted">Total</p>
              <p class="big">‚Çπ${p.total}</p>
            </div>
          </div>
          <p class="muted">Price: ‚Çπ${p.price}</p>
        </div>
        <div class="plan-action">
          <button class="invest-btn" onclick="invest(${p.price})">Invest</button>
        </div>
      </div>
    `;
  });
}

function renderTransactions(){
  const list = document.getElementById("transactionList");
  list.innerHTML = "";
  transactions.forEach(t => {
    list.innerHTML += `
      <div class="transaction">
        User ${t.user} **** XX | ${t.action} ‚Çπ${t.amount} successfully | ${t.date}
      </div>
    `;
  });
}

async function invest(price){
  if (!confirm(`Invest ‚Çπ${price} from your wallet?\n\nYou will earn ‚Çπ100 daily automatically.`)) {
    return;
  }

  try {
    const data = await apiCall('/invest', 'POST', { amount: price });
    alert(data.message || 'Investment successful. ‚Çπ100 will be added to your wallet every 24 hours.');
    window.location.reload();
  } catch (error) {
    alert(error.message || 'Investment failed. Please try again.');
  }
}

renderPlans();
renderTransactions();
</script>
</body>
</html></body>
</html>